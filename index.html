<script>
  // 檢查視窗寬度是否小於 600，如果是就導向 index_mobile.html
  //console.log(screen.width);
  //if (screen.width < 600 && !location.pathname.includes("index_mobile.html")) {
  //  location.href = "index_mobile.html" + location.search;
  //}
</script>
<!DOCTYPE html>
<html lang="en">
<head>
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
	<script src="js/svg3DTagCloud.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<!-- Swiper CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
	<!-- Swiper JS -->
	<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/SystemStyle.css">
	<title>桃園TRPG推廣會系統介紹</title>
</head>
<body>
	<div class="container">
		<!--標題區域-->
		<div class="header-container ">
			<div class="col-lg-12">
				<div class="row d-flex align-items-center">
					<div class="col-md-7 col-12 text-left p-3">
						<a href="https://sleepyknife.github.io/tyntrpg_system/" target="_blank" class="header-title">
                            <span >
                                桌上角色扮演遊戲（TRPG )<br>
                                系統全面導覽
                            </span>
						</a>
					</div>
					<div class="col-md-5 col-12 text-left p-3">
						<img src="image/dicecat_introduction.png" alt="骰子貓來介紹" class="img-fluid">
					</div>
				</div>
			</div>
		</div>
		<div class="tab-content active">
			<div class="col-lg-12 outer-container">
				<div class="col-lg-12 system-introduction">

					<div class="row d-flex align-items-center" style="padding-top: 2%; padding-bottom: 2%; padding-right: 5%; padding-left: 5%; ">
						<span   class="title-text" style="margin-bottom: 2%">
							什麼是TRPG系統？基本概念解析<br />
						</span>
						<span  id="Description">
							TRPG系統是設計用於桌上角色扮演遊戲的規則集，它提供了一個結構和框架，讓玩家可以扮演虛構的角色並參與一個共同的故事。TRPG系統通常包含角色創建規則、戰鬥系統、技能系統、魔法系統以及其他遊戲機制。</br>
							簡單來說，TRPG系統就是一個遊戲規則手冊，它讓玩家可以自由地創作故事，並在一個充滿想像力的世界中探索和冒險。TRPG系統通常使用骰子來解決遊戲中各種事件的結果，例如戰鬥、技能檢定、角色的行動等。
						</span>
					</div>
				</div>
			</div>
		</div>

		<!-- 系统介绍 -->
		<div id="system-overview" class="tab-content active">
			<div class="system-section">
				<div class="col-lg-12">
					<div class="row d-flex align-items-center" style="padding-top: 2%; padding-bottom: 2%; padding-right: 5%; padding-left: 5%; text-align: center;">
						<span  class="title-text">主要TRPG系統類型及特點介紹</span>
					</div>
				</div>
				<div id="category-container" style="margin: 1% 0; display: flex; justify-content: center; flex-wrap: wrap; "></div>

				<div id="SystemContent-container" class="accordding-container">
					<div class="col-lg-12 ">
						<div class="row d-flex align-items-center" style="padding-top: 4%; padding-bottom: 2%; padding-right: 5%; padding-left: 5%; text-align: left; ">
							<span class="fade-text" id="SystemStyle" style="margin-bottom : 2%">
								TRPG系統百百種，選對口味才玩得開心！<br />
							</span>
							<span class="fade-text" id="SystemStyle-Description" style="min-height:150px">
								你有想過當個抓鬼的神棍、打怪的劍士、還是陰影中潛伏的社畜間諜嗎？TRPG（桌上角色扮演遊戲）就像一場大型即興戲劇，每套系統都有自己的世界觀、玩法和風格。有的走驚悚路線，理智值掉滿地；有的充滿魔法與騎士，想飛天就飛天；也有那種日常搞笑型的，整場團打完大家只記得吐槽和亂入。<br />
								TRPG 的美妙之處就在於——風格超多，規則各異，你可以自由選擇最對你胃口的系統，打造屬於你的小宇宙。不管你是初入坑的新手，還是已經跑團到可以當 NPC 的老屁股，只要找到合拍的系統，就能馬上沉浸其中，哭、笑、尖叫、爆肝（？）都有人陪你一起體驗。<br />
								總之，別害羞，挑一種你喜歡的風格，來場說玩就玩的冒險旅程吧！
							</span>
						</div>
					</div>
				</div>
				<div id="systems-container" class="system-tags">
				</div>
			</div>

			<div class="content-container" id="system-content-container" style="display: none;">
				<div class="row d-flex  align-items-start" style="padding: 2% 5%;">
					<!-- 右側圖片 -->
					<div class="col-lg-6 image-section" id="system-image-section">
						<div class="swiper mySwiper" id="system-swiper">
							<div class="swiper-wrapper" id="system-swiper-wrapper">
							</div>
							<div class="swiper-button-next"></div>
							<div class="swiper-button-prev"></div>
							<div class="swiper-pagination"></div>
						</div>
					</div>

					<!-- 左側文字 -->
					<div class="col-lg-6 text-section">
						<span id="system-title" style="margin-bottom: 20px; font-weight: bold;"></span>
						<p class="quote" id="system-quote">这里是引言部分。</p><br />
						<p class="main-text" id="system-main-text">这里是内文的文字范例。</p>
						<p class="signature" id="system-signature">签名部分</p>
					</div>
				</div>
			</div>

			<!-- 动态生成的系统详细信息容器 -->
			<div id="dynamic-system-container"></div>


		</div>
		<!--文字雲-->
		<div class="Word-Cloud active">
			<div class="col-lg-12 outer-container">
				<div class="col-lg-12 ">

					<div class="row d-flex align-items-center justify-content-center text-center"
						 style="padding: 2% 5%;">
						<div class="col-lg-8">
							<span class="title-text" style=" margin-bottom: 1%;">
								快速探索系統風格
							</span>
							<span style="font-size: 1.1rem;">
								不知從哪開始？用不同角度看看各種 TRPG 系統的魅力！
							</span>
							<div id="explore-controls" class="explore-controls">
								<button id="btn-image-mode" class="explore-btn active">🖼️ 圖片模式</button>
								<button id="btn-text-mode" class="explore-btn">🔤 文字模式</button>
								<button id="btn-random-pick" class="explore-btn">🎲 隨機推薦</button>
							</div>
						</div>
					</div>
					<!-- Display Cloud Words -->
					<div id="word-cloud-container">
						<div id="word-cloud"></div>

					</div>
				</div>
			</div>
		</div>
		<!--事件區域-->
		<div class="event-section">
			<!--<div class="col-lg-12 outer-container">-->
				<div class="col-lg-12 system-introduction">
					<div class="row d-flex align-items-center justify-content-center text-center" style="padding: 2% 5%;">
						<div class="col-lg-8">
							<span class="section-title">近期 TRPG 活動推薦</span>
							<span class="section-description">
								還不知道要玩哪個系統嗎？也許可以從最近的推廣活動找靈感，看看主持人準備了哪些精彩冒險！
							</span>
						</div>
					</div>

					<div class="event-date-selector-wrapper" style="text-align: center; margin: 20px 0;">
						<select id="event-date-selector" class="event-date-selector">
							<option disabled selected>請選擇活動日期</option>
						</select>
					</div>
					<div class="events-container" id="events-container"></div>

				</div>
			<!--div-->
		</div>

	</div>
	<button id="backToTopBtn">回到最上面</button>
	<script>
		
		// 全局變量來存儲讀取的事件資料
		let systemData = [];
		let eventsData = [];
		let uniqueCategories = new Set();
        let SystemDescriptionData = {};
		const paramsOnLoad = new URLSearchParams(window.location.search);

        window.addEventListener("DOMContentLoaded", () => {
            loadJsonFromFolder().then(() => {
                const params = new URLSearchParams(window.location.search);
                const date = params.get('date');
                const system = params.get('system');
                const master = params.get('master');

                if (date && master) {
                    renderEventCards(date);
                    displaySystemDetails(system, master, date, true);
                }
                else if (system) {
                    displaySystemDetails(system, null,  null, true);
                    document.getElementById('system-content-container')?.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

		//自動化精簡讀取json，如果需要追加修改json數量，一律去manifest.json改，讓html減肥
        async function loadJsonFromFolder(folderPath = 'data/') {
            try {
                const manifestRes = await fetch(`${folderPath}manifest.json`);
                const manifest = await manifestRes.json();

                const jsonFiles = manifest.files;

                const fetches = jsonFiles.map(filename =>
                    fetch(`${folderPath}${filename}?t=${Date.now()}`)
                        .then(res => {
                            if (!res.ok) throw new Error(`讀取失敗：${filename} (${res.status})`);
                            return res.json();
                        })
                );

				const results = await Promise.all(fetches);
                // 對結果依照順序處理（可自行調整）
                systemData = results[0].details;
                eventsData = results[1].events; // from events.json
                SystemDescriptionData = results[2].include;

                // 處理資料
                generateSystemTabs(systemData);
                const Categories = [...new Set(
                    systemData.flatMap(system =>
                        system.category.split('、').map(tag => tag.trim())
                    )
				)].sort((a, b) => a.length - b.length);
                Categories.unshift("全部");
                generateCategoryButtons(Categories);
                generateCategorySelector(eventsData);

            } catch (error) {
                console.error("讀取 JSON 資料時發生錯誤：", error);
            }
        }


		// 動態生成日期下拉選單
        function generateCategorySelector(events) {
            const selector = document.getElementById('event-date-selector');
            selector.innerHTML = '<option disabled selected>請選擇活動日期</option>'; 
            // 建立唯一日期集合
            const uniqueDates = [...new Set(events.map(e => e.date))];

            uniqueDates.forEach(date => {
                const option = document.createElement('option');
                option.value = date;
                option.textContent = date;
                selector.appendChild(option);
            });

            selector.addEventListener('change', function () {
                const eventBlock = document.getElementById('events-container');
                if (eventBlock) {
                    eventBlock.scrollIntoView({ behavior: 'smooth' });
                }
			});

            document.getElementById('event-date-selector').addEventListener('change', function () {
                const selectedDate = this.value;
                renderEventCards(selectedDate);
            });
        }	
		
		// 根據所選日期顯示對應的活動
        function renderEventCards(TargetData) {
            const container = document.getElementById('events-container');
            container.innerHTML = ''; // 清空

            const event = eventsData.find(e => e.date === TargetData);
            if (!event || !event.masters) {
                container.innerHTML = '<p>此日期下沒有活動。</p>';
                return;
            }

            event.masters.forEach(master => {
                const card = document.createElement('a');
                card.className = 'event-card';
                card.innerHTML = `
                    <span>主持人：${master.name}</span> <br>
                    <span>系統：${master.system}（${master.system_EN}）</span>
                `;
                card.addEventListener('click', () => {
                    displaySystemDetails(master.system, master.id, event.date, true);
                    document.querySelectorAll('.event-card').forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                });
                container.appendChild(card);
            });
        }
		
        // 處理瀏覽器返回時顯示活動詳情
        window.addEventListener('popstate', e => {
            if (e.state?.system) {
                displaySystemDetails(
                    e.state.master || null,
                    e.state.system,
                    e.state.date || null,
                    false 
                );
            }
        });
        // 回到頂部按鈕功能
        document.addEventListener('DOMContentLoaded', () => {
            // 回到頂部按鈕功能
            const btn = document.getElementById('backToTopBtn');
            window.addEventListener('scroll', () => {
                btn.style.display = window.scrollY > 200 ? 'block' : 'none';
            });
            btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
            
            const params = new URLSearchParams(window.location.search);
            const systemParam = params.get('system');

            if (systemParam) {
                displaySystemDetails(
                    history.state?.master || null,
                    systemParam,
                    history.state?.date || null,
                    false
                );
            }
        });

        // 顯示系統風格的介紹
        function ShowSystemStyleDescription(SystemStyle) {

            const match = SystemDescriptionData.find(data => data.name === SystemStyle);
            if (match) {
                const titleEl = document.getElementById("SystemStyle");
                const descEl = document.getElementById("SystemStyle-Description");
                if (match.name == "全部") { match.name = "小孩子才做選擇！我全都要！" };
                fadeTextChange(titleEl, match.name);
                fadeTextChange(descEl, match.description);
            }

            displaySystemsByCategory(SystemStyle);

            //彈出系統列表
            const sysContainer = document.getElementById("systems-container");
            if (sysContainer && !sysContainer.classList.contains("active")) {
                sysContainer.style.display = "block";
                setTimeout(() => {
                    sysContainer.classList.add("active");
                }, 400);
            }

            //收起系統詳細介紹
            const SysContenter = document.getElementById("system-content-container");
            if (SysContenter) {
                SysContenter.classList.add("hide");
                setTimeout(() => {
                    SysContenter.style.display = "none";
                }, 500);

            }
        }

        // 顯示所選分類的系統
        function displaySystemsByCategory(category) {
            const filtered = (category === "全部")
                ? systemData
                : systemData.filter(system => system.category.includes(category));

            generateSystemTabs(filtered); // 根據過濾後的系統顯示細節
        }

		// 动态生成系统标签，Table
        function generateSystemTabs(systems) {
            const systemsContainer = document.getElementById('systems-container');
            systemsContainer.innerHTML = '';

            const table = document.createElement('table');
            table.className = 'system-table';

            // 標題列
            const showAllRow = document.createElement('tr');
            const showAllCell = document.createElement('td');
            showAllCell.className = 'system-title-cell';
            showAllCell.colSpan = 2;
            showAllCell.textContent = '系統一覽';
            showAllRow.appendChild(showAllCell);
            table.appendChild(showAllRow);

            let row;
            systems.forEach((system, index) => {
                if (index % 2 === 0) {
                    row = document.createElement('tr');
                    table.appendChild(row);
                }

                const cell = document.createElement('td');
                cell.className = 'system-cell ' + (Math.floor(index / 2) % 2 === 0 ? 'system-row-even' : 'system-row-odd');
                cell.setAttribute('data-system', system.system);

                const textSpan = document.createElement('span');
                textSpan.className = 'system-fade';
                textSpan.textContent = `${system.system}《${system.system_EN}》`;
                cell.appendChild(textSpan);

                // 漸層顯示
                setTimeout(() => textSpan.style.opacity = '1', 20 * index);

                // 點擊事件
                cell.addEventListener('click', () => {
                    document.querySelectorAll('#systems-container td').forEach(td => {
                        td.classList.remove('active');
                        td.classList.remove('system-row-even', 'system-row-odd');
                        const r = Math.floor([...td.parentNode.parentNode.children].indexOf(td.parentNode) - 1);
                        if (r >= 0) {
                            td.classList.add(r % 2 === 0 ? 'system-row-even' : 'system-row-odd');
                        }
                    });

                    cell.classList.add('active');
                    const container = document.getElementById('system-content-container');
                    container.style.display = 'block';
                    container.classList.remove('hide');
                    displaySystemDetails(system.system, null,  system.update, true);
                });

                row.appendChild(cell);
            });

            systemsContainer.appendChild(table);
        }
		
		function clean(str) {
		  return str
			?.toString()
			.replace(/[\u200B-\u200D\uFEFF]/g, '') // 清掉零寬空白、FEFF、其他奇怪字元
			.replace(/\s/g, '') // 清掉可見空白（半形、全形、tab）
			.trim();
		}

		// 根据系统显示详细信息
        function displaySystemDetails(systemName, masterId, eventDate, shouldUpdateUrl = false) {
            const systemContentContainer = document.getElementById('system-content-container');
            let displayData = null;
            let masterInfo = null;

            // If we have event details, find the master info.
            if (eventDate && masterId) {
                const event = eventsData.find(e => e.date === eventDate);
                if (event && event.masters) {
                    masterInfo = event.masters.find(m => m.id === masterId);
                }
            }

            // If systemName is missing, try to get it from the master info.
            if (!systemName && masterInfo) {
                systemName = masterInfo.system;
            }

            // Now, find the system details from the main system list.
            if (systemName) {
                const system = systemData.find(s => clean(s.system).includes(clean(systemName)));
                if (system) {
                    // Use system data as a base
                    displayData = {
                        system: system.system,
                        system_EN: system.system_EN,
                        quote: system.Quote,
                        description: system.Description,
                        author: system.Author,
                        image1: system.image1,
                        image2: system.image2
                    };
                }
            }

            // If we have master-specific info, use it to override.
            if (masterInfo) {
                // If there was no base system data, create an object
                if (!displayData) {
                    displayData = {};
                }
                displayData.system = masterInfo.system || displayData.system;
                displayData.system_EN = masterInfo.system_EN || displayData.system_EN;
                displayData.quote = masterInfo.quote || displayData.quote;
                displayData.description = masterInfo.description || displayData.description;
                displayData.author = masterInfo.name; // Master's name always overrides author
                displayData.image1 = masterInfo.image1 || displayData.image1;
                displayData.image2 = masterInfo.image2 || displayData.image2;
            }


            if (!displayData) {
                console.error("找不到系統資料:", { systemName, masterId, eventDate });
                systemContentContainer.style.display = 'none';
                return;
            }

            // Update DOM with displayData
            document.getElementById('system-title').innerHTML = ` ${displayData.system} <br>《${displayData.system_EN}》`;
            document.getElementById('system-quote').textContent = displayData.quote ? `“${displayData.quote}”` : "";
            document.getElementById('system-main-text').innerHTML = displayData.description || "";
            document.getElementById('system-signature').innerHTML = `本介紹文由 ${displayData.author} 撰寫。<br>本文用於桃園TRPG推廣會活動使用。`;

            // Update images in swiper
            const swiperWrapper = document.getElementById('system-swiper-wrapper');
            swiperWrapper.innerHTML = ''; // Clear existing slides

            [displayData.image1, displayData.image2].forEach((imagePath, index) => {
                if (imagePath) {
                    const slide = document.createElement('div');
                    slide.className = 'swiper-slide';
                    const img = document.createElement('img');
                    img.src = `image/${imagePath}`;
                    img.alt = `image${index + 1}`;
                    slide.appendChild(img);
                    swiperWrapper.appendChild(slide);
                }
            });

            // Re-initialize Swiper
            if (window.systemSwiper) {
                window.systemSwiper.destroy(true, true);
            }
            window.systemSwiper = new Swiper(".mySwiper", {
                loop: true,
                navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
                pagination: { el: ".swiper-pagination", clickable: true },
                autoplay: { delay: 5000, disableOnInteraction: false }
            });

            // Show container and scroll
            systemContentContainer.style.display = 'block';
            systemContentContainer.scrollIntoView({ behavior: 'smooth' });

            // Update URL
            if (shouldUpdateUrl) {
                const stateData = {
                    system: displayData.system,
                    date: eventDate || null,
                    master: masterId || null
                };

                const params = new URLSearchParams();
                params.set('system', stateData.system);
                if (stateData.date) params.set('date', stateData.date);
                if (stateData.master) params.set('master', stateData.master);

                const newUrl = `${window.location.pathname}?${params.toString()}`;
                if (newUrl !== window.location.href) {
                     history.pushState(stateData, '', newUrl);
                }
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            let currentMode = "image";
            const wordCloudElement = document.getElementById("word-cloud");

            // 判斷是否為手機
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

            // 初始化文字雲
        function initializeWordCloud(mode) {
                const parent = wordCloudElement.parentElement;
                const parentWidth = parent.clientWidth;
                const cloudSize = Math.min(parentWidth * 0.8, 600);

                fetch('data/system.json')
                    .then(res => res.json())
                    .then(data => {
                        const systemData = data.details;

                        if (mode === "random") {
                            const randomSystem = systemData[Math.floor(Math.random() * systemData.length)];
                            window.displaySystemDetails(null, randomSystem.system, randomSystem.update, true);
                            return;
                        }

                        const entries = systemData.map(system => {
                            if (mode === "text") {
                                return { label: `${system.system}《${system.system_EN}》`, systemName: system.system };
                            } else if (mode === "image") {
                                return {
                                    image: './image/' + system.image1,
                                    width: isMobile ? 80 : 140,
                                    height: isMobile ? 80 : 140,
                                    systemName: system.system
                                };
                            }
                        });

                        const settings = {
                            entries,
                            width: parentWidth,
                            height: isMobile ? cloudSize + 100 : cloudSize,
                            radius: '100%',
                            radiusMin: 75,
                            bgDraw: false,
                            bgImage: "./image/word-cloud-bg.jpeg",
                            opacityOver: 1.0,
                            opacityOut: 0.05,
                            opacitySpeed: 6,
                            fov: 800,
                            speed: isMobile ? 0.2 : 0.3,
                            fontFamily: "Arial, sans-serif",
                            fontSize: isMobile ? 13 : 18,
                            fontColor: "#fff",
                            fontWeight: "bold",
                            fontStyle: "normal",
                            fontStretch: "normal",
                            fontToUpperCase: false,
                            onClick(systemName) {
                                const parsed = systemName.split("《")[0].trim();
                                window.displaySystemDetails(parsed, null,  null, true);
                            }
                        };

                        new SVG3DTagCloud(wordCloudElement, settings);
                    })
                    .catch(err => console.error("讀取 system.json 錯誤:", err));
        }

            // ✅ 共用刷新方法
        function reloadCloud(mode) {
                currentMode = mode;
                wordCloudElement.innerHTML = "";
                initializeWordCloud(mode);
        }
        // ✅ 初始載入與 resize
        initializeWordCloud(currentMode);
        window.addEventListener("resize", () => reloadCloud(currentMode));

        // ✅ 綁定所有模式按鈕
        const modeButtons = {
                "btn-image-mode": "image",
                "btn-text-mode": "text",
                "btn-random-pick": "random"
        };
        Object.entries(modeButtons).forEach(([btnId, mode]) => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    btn.addEventListener("click", () => reloadCloud(mode));
                }
            });
        });

        const categorizedSystems = systemData.map(system => system.category); // 提取所有分類
        const Categories = [...new Set(categorizedSystems)];

        function generateCategoryButtons(categories) {
            const categoryContainer = document.getElementById("category-container");
            categoryContainer.innerHTML = '';

            categories.forEach(category => {
                const button = document.createElement("button");
                button.textContent = category;
                button.className = "category-button";

                button.addEventListener("click", () => {
                    ShowSystemStyleDescription(category);
                });

                categoryContainer.appendChild(button);
            });
        }  

        // 顯示該分類的詳細介紹與系統名稱
        function displayCategoryDetails(category) {
            const systemsContainer = document.getElementById('SystemContent-container');
			systemsContainer.innerHTML = '';  // 清空現有內容
			debugger
            const categoryTitle = document.createElement("h3");
            categoryTitle.textContent = category.category;
            systemsContainer.appendChild(categoryTitle);

            const categoryDescription = document.createElement("p");
            categoryDescription.textContent = category.description;
            systemsContainer.appendChild(categoryDescription);

            const table = document.createElement('table');
            table.style.width = "100%";
            table.style.borderCollapse = "collapse";

            category.forEach(system => {
                const row = document.createElement('tr');
                const cell = document.createElement('td');
                cell.textContent = system.system + "《" + system.system_EN + "》";
                cell.style.border = "1px solid #ddd";
                cell.style.padding = "10px";
                cell.style.textAlign = "center";
                row.appendChild(cell);
                table.appendChild(row);
            });

			systemsContainer.appendChild(table);
        }

        // 展開或收起分類內容
        function toggleCategoryContent(category) {
            const systemsContainer = document.getElementById('systems-container');
            const contentDiv = document.querySelector(`#systems-container h3:contains('${category}')`).parentElement;

            // 如果該分類已經顯示，則隱藏它
            if (contentDiv.style.display === "none") {
                contentDiv.style.display = "block";
            } else {
                contentDiv.style.display = "none";
            }
        }       

        function fadeTextChange(element, newText) {
            if (!element) return;
            element.classList.add('fade-out');
            // 換文字並淡入
            setTimeout(() => {
                element.innerHTML  = newText;
                element.classList.remove('fade-out');
            }, 300); 
		}       

        // 切換模式樣式
		function switchToMode(mode) {
			document.querySelectorAll(".explore-btn").forEach(btn => btn.classList.remove("active"));
			if (mode === "image") {
				document.getElementById("btn-image-mode").classList.add("active");
				// 這裡加上切換圖片的邏輯
			} else {
				document.getElementById("btn-text-mode").classList.add("active");
				// 這裡加上切換文字的邏輯
			}
		}

       
	</script>

</body>
</html>
